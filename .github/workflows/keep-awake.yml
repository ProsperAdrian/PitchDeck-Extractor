# .github/workflows/keep-awake.yml
name: Keep Streamlit App Awake

on:
  schedule:
    # Every 30 minutes
    - cron: '*/30 * * * *'
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Wake Streamlit app with browser‚Äêstyle ping
        run: |
          URL="https://pitchdeck-analyser.streamlit.app/"
          HTTP_STATUS=$(curl -L -o /dev/null -s -w "%{http_code}" \
            -H "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)" \
            "$URL")
          if [ "$HTTP_STATUS" -ne 200 ]; then
            echo "‚ùå Failed to ping $URL. HTTP status: $HTTP_STATUS"
          else
            echo "üì∂ PINGED $URL ‚Üí HTTP $HTTP_STATUS"
          fi
          exit 0 # Prevent job failure
