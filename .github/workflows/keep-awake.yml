name: Keep Streamlit App Awake

on:
  schedule:
    - cron: '*/30 * * * *'
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Debug curl command
        run: |
          URL="https://pitchdeck-analyser.streamlit.app/"
          echo "Pinging URL: $URL"
          HTTP_STATUS=$(curl -L -o /dev/null -s -w "%{http_code}" \
            -H "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)" \
            "$URL")
          echo "HTTP Status: $HTTP_STATUS"
          if [ "$HTTP_STATUS" -ne 200 ]; then
            echo "‚ùå Failed to ping $URL. HTTP status: $HTTP_STATUS"
            exit 1
          else
            echo "üì∂ PINGED $URL ‚Üí HTTP $HTTP_STATUS"
          fi
